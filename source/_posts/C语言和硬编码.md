---
title: C语言和硬编码
date: 2022-05-08 09:22:14
tags:
---

编程中的一些值赤裸裸的掺杂在代码逻辑里，使人看的头皮发麻，完全不知道它的底细。   
更可怕的是某些硬编码会重复出现，根本分不清楚它们几个指的是不是一样东西，给这些硬编码加注释也只能缓解部分尴尬，总有你忘记注释的地方。
```text
if(result >= 1){}  // 这个1是什么意思，是 正常执行后的返回值，还是仅仅标记 正常状态 ？
if(data1 >= 1){}   // 这个1和上面的1有什么关系？
if(data2 >= 1){}   // 你又是什么情况？
```
一般建议用用常量替代，因为可以统一管理同一个东西,还可以通过名称提供它的相关信息。（用变量也是可以的）
```text
const int ok = 1;
const int oneAddZero = 1; 

if(result >= ok){}
if(data1 >= oneAddZero){}
if(data2 >= oneAddZero){}
```

代码逻辑里的常量名和变量名本身也是"硬编码"，只是它提供的信息比较多，我们认为够用了。   
这些名称不是普通的string，它是内存地址的语法糖。   
有一种变量类型可以存储内存地址，它就是指针。   

```text
int a = 1;
int* a_point = &a;

printf("what's up 1: %d\n", a);
printf("what's up 2: %d\n", *a_point);
```

到目前为止，变量的值：   
>   可以是数据，   
    可以是其他变量名，   
    可以是函数（其实是函数名，本质上还是变量名）。

上面几种变量都是在运行期间使用的。  

有一种特殊的变量叫做"宏"，它的值是一段代码，不同与函数调用，该变量的值（即代码）会在使用的地方直接展开。   
宏只能在编译期使用，运行期看到的是展开后的代码。   

只有类型不能被当做变量的值，而在其他语言中，类型也是可以的，那种特殊的变量叫做泛型。   
泛型也是只能在编译器使用，运行期被擦除。  

总结一下，代码里的所用东西都可以看成是硬编码，都可以被替换成变量。   

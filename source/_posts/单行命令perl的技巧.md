---
title: 单行命令perl的技巧
date: 2021-01-20 17:42:25
tags: [perl]
---

| 意图     | 选项 | 同义代码 | 备注 	|
| -------- | ---- | ------- | ---- |
| 起始代码 |  |BEGIN{}| 在任何代码执行之前先执行。当仅初始化变量时，同 `-s` 选项。 |
| 结尾代码 |		|END{}   或  }{	| 在整个程序执行最后时候执行。 |
| 起始变量		 |-s		|		| perl的-s选项允许解析`--`之后的`-xxx=yyy`格式的开关选项。 |
| 	|	|	|	|
| 行处理		 |		|		| 将 `分隔后的行` 放进数组 `$_` 中 |
| 行输入分隔符	|-l 	|$/ 	| 未启用选项时，默认值是 `\n` 。启用选项时如果没有给定任何选项参数，则与 `行输入分隔符` 同值。 |
| 行输出分隔符	|-0 	|$\ 	| 默认值是  ` null` ，即多行拼成一行。 |
| 行替换		 |-p 	|while(<>){print}|强制输出 `$_`|
| 行匹配		 |-n 	|while(<>)| 可选输出 |
| 行增删		 |		|$.		| 全局变量，存储当前行号 |
| 	|	|	|	|
| 启用字段分隔	| -a |		| 默认不启用。启用后，将 `分隔后的字段` 放进数组 `@F` 中 |
| 字段输入分隔符	|-F		|split  / /,$_|	|
| 字段输出分隔符	|	|$"| 变量指定print/say输出 `双引号` 包围时的列表/数组时的元素分隔符，默认值为空格。 |
| 字段输出分隔符	|		|\$,	| 变量指定print/say输出 `无双引号` 包围的列表/数组时的元素分隔符，默认值为undef，也就是元素之间紧紧相连。 |
| 字段处理		 |		|$F[i] 	|		|
| 	|	| |	|
| 保存修改	| -i | | i.bak 将 原文件xxx 备份为 xxx.bak |
| 重复符号	|  |x | 字母 `X` 的小写 |
| 转成数值	|  |scalar() 或 ~~ |  |
| 匹配真	|  |=~ |  |
| 匹配假	|  |!~ |  |
| 数组最大下标	|  |$#array | 数组@array的最后一个元素的下标值 |


### 注意点:
-p 选项的注意点

`ls | perl -pe 'substr $_,1,2'` 仅输出 `ls` 的数据。
`ls | perl -pe '$_ = substr $_,1,2'` 可输出处理过的数据。


---
title: '混沌时代的编辑器: ed'
date: 2021-01-14 12:06:04
tags:
---
Unix操作系统的作者Ken Thompson于1971年8月发布ed的第一个版本，是Unix操作系统三个最基础的组件。哪三个组件？编译器、编辑器和shell。

切换至输入模式的命令如下：
```
a，在当前行的下一行开始插入文字；
i，在当前行的上一行开始插入文字；
c，抹除当前行的所有文字，重新输入。
```
注意 c 命令的危险性。

切换至输入模式后，就请随意地打字吧，回车也会忠实地写入文件。缺点是没有办法修改回车符以前的输错的文字。如果想修改，必须退出当前的输入模式再尝试修改。

如果想退出输入模式，在新行输入 . 即可。就是英文句点。

导航Permalink
以下导航命令应当在命令模式下使用。
```
直接输入行号并回车，跳转到对应行，并回显对应行的文字（不带行号）。
输入回车，会跳转到下一行，并回显对应行的文字（不带行号）。
输入 . ，会重复显示当前行的文字（不带行号）。
输入 n，会回显当前行的文字（带行号）。
```

以下是一个 Linux ed 完整实例解析：
```shell
$ ed              <- 激活 ed 命令
a                 <- 告诉 ed 我要编辑新文件
My name is Titan. <- 输入第一行内容
And I love Perl very much. <- 输入第二行内容
.                 <- 返回 ed 的命令行状态
i                 <- 告诉 ed 我要在最后一行之前插入内容
I am 24.          <- 将“I am 24.”插入“My name is Titan.”和“And I love Perl very much.”之间
.                 <- 返回 ed 的命令行状态
c                 <- 告诉 ed 我要替换最后一行输入内容
I am 24 years old. <- 将“I am 24.”替换成“I am 24 years old.”（注意：这里替换的是最后输的内容）
.                 <- 返回 ed 的命令行状态
w readme.text     <- 将文件命名为“readme.text”并保存（注意：如果是编辑已经存在的文件，只需要敲入 w 即可）
q                 <- 完全退出 ed 编辑器
```

这是文件的内容是：
```shell

$ cat readme.text
My name is Titan.
I am 24 years old.
And I love Perl vrey much.
```

后续影响:
```
ex (文本编辑器)，最初是扩展版本的ed。
vi，基于ex的可视全面屏编辑器.
sed，基于ed内脚本特征的标准UNIX流式编辑器。
```
